/*! Educational planning application#0.0.1 Copyright ASV*/
"use strict";angular.module("edup.common",["restangular","angularUtils.directives.dirPagination","mgcrea.ngStrap"]),angular.module("edup.common").directive("appModal",function(){return{restrict:"A",link:function(a,b){a.dismissModal=function(){b.modal("hide")},a.showModal=function(){b.modal("show")}}}}),angular.module("edup.common").directive("datePicker",["$timeout","$filter",function(a,b){return{restrict:"E",templateUrl:"date-picker",scope:{inputField:"=",label:"@",pickerPlaceholder:"@",datePickerId:"@"},controller:["$scope",function(){}],link:function(c){a(function(){var a=$("#"+c.datePickerId);a.datetimepicker({viewMode:"days",format:"YYYY-MM-DD"}),a.on("dp.change",function(a){c.inputField=b("date")(new Date(a.date),"yyyy-MM-dd")})})}}}]),angular.module("edup.common").directive("timePicker",["$timeout","$filter",function(a,b){return{restrict:"E",templateUrl:"time-picker",scope:{inputField:"=",label:"@",pickerPlaceholder:"@",timePickerId:"@"},controller:["$scope",function(){}],link:function(c){a(function(){var a=$("#"+c.timePickerId);a.datetimepicker({format:"HH:mm"}),a.on("dp.change",function(a){c.inputField=b("date")(new Date(a.date),"HH:mm")})})}}}]),angular.module("edup.common").directive("edupToggle",["$timeout",function(a){return{restrict:"E",templateUrl:"edup-toggle",scope:{onEvent:"&",offEvent:"&",onLabel:"@",offLabel:"@",toggleId:"@",linkWidget:"="},controller:["$scope",function(){}],link:function(b){a(function(){b.onLabel||(b.onLabel="On"),b.offLabel||(b.offLabel="Off");var a=$("#"+b.toggleId);a.bootstrapToggle(),a.change(function(){$(this).prop("checked")?b.onEvent():b.offEvent()})})}}}]),angular.module("edup.common").directive("windowSize",["$document","$window",function(a,b){return{restrict:"A",link:function(c){var d=b.innerHeight||a.body.clientHeight,e=$("#edupHeader").height();c.viewScrollPaneHeight=d-e-40,console.log(c.viewScrollPaneHeight)}}}]),angular.module("edup.common").filter("toJson",function(){return function(a,b){return angular.toJson(a,b)}}),angular.module("edup.common").config(["paginationTemplateProvider",function(a){var b,c=window.location.hostname;b=c.indexOf("127.0.0.1")>-1?"http://127.0.0.1:8088/":"https://"+c+":8443/edup/ng",a.setPath(b+"/vendor/bower_components/angular-utils-pagination/dirPagination.tpl.html")}]),angular.module("edup.common").run(["Restangular","UrlService","NotificationService",function(a,b,c){a.setBaseUrl(b.BaseUrl+"/api"),a.setErrorInterceptor(function(a){var b="";return 400===a.status?_.forEach(a.data.errors,function(a){b+=a.message+",\n\n"}):b="Failed on: "+a.config.method+" to: "+a.config.url,c.Error(b),console.log(angular.toJson(a,!0)),!1}),a.setRestangularFields({etag:"versionId"}),a.setDefaultHeaders({"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"})}]),angular.module("edup.common").service("NotificationService",function(){return alertify.set("notifier","position","bottom-right"),{Success:function(a){alertify.success(a)},Info:function(a){alertify.message(a)},Error:function(a){alertify.error(a)}}}),angular.module("edup.common").service("PaginationService",function(){var a=function(a){return a.page?a.page*a.perPage:1*a.perPage},b=function(a){return a.page?a.page*a.perPage-a.perPage:1*a.perPage-a.perPage};return{Top:a,Skip:b}}),angular.module("edup.common").service("QueryBuilderService",function(){function a(){}return new a}),angular.module("edup.common").service("QueryService",function(){var a=function(a,b,c,d,e,f){var g={};return g.$count=!0,a&&(g.$top=a),a&&(g.$skip=b),a&&(g.$search=c),d&&(g.$orderby=d),e&&(g.$filter=e),f&&(g.count=f),g};return{Query:a}}),angular.module("edup.common").service("RestService",["Restangular",function(a){var b=a.one("private"),c=a.one("public");return{Private:{Students:b.one("students"),Balance:b.one("balance"),Documents:b.one("documents"),LogOut:b.one("logout"),Subjects:b.one("subjects")},Public:{Login:c.one("login")}}}]),angular.module("edup.common").service("TypeAheadService",["UrlService",function(a){var b=a.Subjects,c={},d=function(a){c=a.values;var b=_.pluck(a.values,"subjectName");return b},e=function(){var a=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:b+"?$count=true&$orderby=Created+desc&$search=%QUERY&$skip=0&$top=999&count=true",filter:d,wildcard:"%QUERY"}});return a.initialize(),a};return{Build:e,DataSet:function(){return c}}}]),angular.module("edup.common").service("UrlService",function(){var a,b=window.location.hostname;return a=b.indexOf("127.0.0.1")>-1?"https://localhost:8443/edup":"https://"+b+":8443/edup",{BaseUrl:a,Files:{Info:a+"/api/private/files",Upload:a+"/api/private/files/upload",Download:a+"/api/private/files/download"},Subjects:a+"/api/private/subjects"}}),angular.module("edup.login",[]),angular.module("edup.login").directive("edupLogin",function(){return{restrict:"E",templateUrl:"edup-login",controller:["$scope","$window","RestService","UrlService","NotificationService",function(a,b,c,d){a.submitLogin=function(a,e){c.Public.Login.customPOST("j_username="+a+"&j_password="+e,void 0,{},{"Content-Type":"application/x-www-form-urlencoded"}).then(function(){b.location.href=d.BaseUrl})}}],link:function(){}}}),angular.module("edup.header",["ui.router"]),angular.module("edup.header").controller("NavbarController",["$scope","$state",function(a,b){a.appModel={items:["Students","Subjects","Calendar"],states:["students","subjects","calendar"],current:0},a.$watch(function(){return a.appModel.current},function(c){b.go(a.appModel.states[c])})}]),angular.module("edup.header").directive("edupHeader",function(){return{restrict:"E",templateUrl:"edup-header",controller:["$scope","$window","$location","RestService","UrlService",function(a,b,c,d,e){a.isActive=function(a){return a===c.path()},a.downloadReport=function(){window.open("https://172.20.10.4:8443/edup/api/private/reports")},a.logoutUser=function(){d.Private.LogOut.post().then(function(){b.location.href=e.BaseUrl})}}],link:function(){}}}),angular.module("edup.footer",[]),angular.module("edup.footer").controller("FooterController",["$scope","$location","Restangular",function(a,b,c){c.one("ping").get().then(function(b){a.appVersion=b.version})}]),angular.module("edup.footer").directive("edupFooter",function(){return{restrict:"E",templateUrl:"edup-footer",link:function(){}}}),angular.module("edup.calendar",["mwl.calendar","ui.bootstrap","ngAnimate"]),angular.module("edup.calendar").controller("CalendarController",["$scope","$modal","moment","calendarTitle",function(a,b,c,d){function e(a,c){b.open({templateUrl:"modalContent.html",controller:["$scope","$modalInstance",function(b,d){b.$modalInstance=d,b.action=a,b.event=c}]})}var f=function(){a.currentDay=d.month()};f(),a.calendarView="month",a.calendarDay=new Date,a.events=[{title:"My event title",type:"info",startsAt:c().subtract(2,"day").toDate(),endsAt:c().add(2,"days").toDate(),editable:!1,deletable:!1,incrementsBadgeTotal:!0},{title:"This some strange warning event",type:"warning",startsAt:c().startOf("week").subtract(2,"days").add(8,"hours").toDate(),endsAt:c().startOf("week").add(1,"week").add(9,"hours").toDate()},{title:"Information event",type:"info",startsAt:c().subtract(1,"day").toDate(),endsAt:c().add(5,"days").toDate()},{title:"This is a really long and importnat event title",type:"important",startsAt:c().startOf("day").add(5,"hours").toDate(),endsAt:c().startOf("day").add(19,"hours").toDate()}],a.eventClicked=function(b){a.currentDay=this.calendarTitle,e("Clicked",b)},a.eventEdited=function(b){a.currentDay=this.calendarTitle,e("Edited",b)},a.eventDeleted=function(b){a.currentDay=this.calendarTitle,e("Deleted",b)},a.toggle=function(a,b,c){a.preventDefault(),a.stopPropagation(),c[b]=!c[b]},a.setCalendarView=function(b){a.calendarView=b,a.currentDay=this.calendarTitle},a.updateTitle=function(){a.currentDay=this.calendarTitle}}]),angular.module("edup.calendar").directive("Ñalendar",function(){return{restrict:"E",templateUrl:"calendar",link:function(){}}}),angular.module("edup.students",[]),angular.module("edup.students").directive("studentAccounting",function(){return{restrict:"E",templateUrl:"student-accounting",controller:["$scope","RestService","NotificationService",function(a,b,c){a.updateStudentBalance=function(d,e){if(d&&d.amount){var f={studentId:e.id,amount:100*d.amount,comments:d.comment,cash:d.cash?d.cash:!0};b.Private.Balance.customPOST(f).then(function(b){var f=b.payload;f&&(e.balance+=d.amount,a.balance=null,c.Success(d.amount+" EUR was added to "+e.name+" "+e.lastName+" student!"))})}}}],link:function(){}}}),angular.module("edup.students").directive("studentAttendance",function(){return{restrict:"E",templateUrl:"student-attendance",controller:["$scope",function(a){a.attendanceHistory=[{subject:"Math",date:"2015/03/03",amount:15},{subject:"Literature",date:"2015/03/03",amount:15},{subject:"Sport",date:"2015/03/04",amount:20},{subject:"History",date:"2015/03/04",amount:10},{subject:"Math",date:"2015/03/05",amount:15},{subject:"English",date:"2015/03/07",amount:15},{subject:"Sport",date:"2015/03/07",amount:20}]}],link:function(){}}}),angular.module("edup.students").directive("balanceModal",["RestService","NotificationService",function(a,b){return{restrict:"E",templateUrl:"balance-modal",link:function(c){c.price={amount:0,cash:!0},c.saving=function(d){if(d&&d.amount){var e={studentId:c.selectedStudent.id,amount:100*d.amount,comments:d.comment,cash:d.cash?d.cash:!0};a.Private.Balance.customPOST(e).then(function(a){var e=a.payload;e&&(c.selectedStudent.balance+=d.amount,c.balance=null,c.dismissModal(),b.Success(d.amount+" EUR was added to "+c.selectedStudent.name+" "+c.selectedStudent.lastName+" student!"))})}},c.resetValue=function(){c.balance=null}}}}]),angular.module("edup.students").directive("studentDetails",function(){return{restrict:"E",templateUrl:"student-details",link:function(a){a.directiveTest="Student input forms"}}}),angular.module("edup.students").directive("studentDocuments",function(){return{restrict:"E",templateUrl:"student-documents",controller:["$scope","QueryService","RestService","PaginationService","UrlService",function(a,b,c,d,e){a.initDocumentsPagination=function(){a.documentsPaging={enabled:!1,page:1,perPage:5,totalRecords:0}},a.initDocumentsPagination(),a.documentsSearch={spin:!1},a.loadDocuments=function(d,f,g){a.basicSearch.spin=!0;var h=b.Query(d,f,g,"Created desc","StudentId eq "+a.selectedStudent.id);c.Private.Documents.get(h).then(function(b){a.documentsSearch.spin=!1,a.documentsPaging.totalRecords=b.count,a.documents=b.values,_.forEach(a.documents,function(a){a.link=e.Files.Download+"/"+a.fileId})})},a.refreshDocumentsList=function(){a.documents=null,a.initDocumentsPagination(),a.loadDocuments(d.Top(a.documentsPaging),d.Skip(a.documentsPaging))},a.documentsPageChanged=function(b,c){a.documentsSearch.spin||(a.documentsPaging.page=b,a.loadDocuments(d.Top(a.documentsPaging),d.Skip(a.documentsPaging),c))}}],link:function(a){a.onShowDownloadToggle=function(){a.showDownloadSection=!0,a.documentsButtonLabel="Hide"},a.offShowDownloadToggle=function(){a.showDownloadSection=!1,a.documentsButtonLabel="Show"},a.toggleDownloadSection=function(){a.showDownloadSection=!a.showDownloadSection,a.showDownloadSection?a.onShowDownloadToggle():a.offShowDownloadToggle()},a.offShowDownloadToggle()}}}),angular.module("edup.students").directive("editStudent",function(){return{restrict:"E",templateUrl:"edit-student",controller:["$scope","RestService","NotificationService","PaginationService",function(a,b,c,d){a.executeStudentUpdate=function(e){e.id=a.selectedStudent.id,e.versionId=a.selectedStudent.versionId,e.birthDate=new Date(e.birthDateString),e&&e.name&&e.lastName&&e.id&&e.versionId&&b.Private.Students.one(e.id.toString()).customPUT(e).then(function(b){a.newStudent=null,a.photoUrl=null,a.photoUploaded=!1,e.versionId=b.payload,c.Success(e.name+" "+e.lastName+" updated!"),a.loadStudents(e.id,d.Top(a.studentPaging),d.Skip(a.studentPaging),null)})}}],link:function(){}}}),angular.module("edup.students").directive("fileUpload",["$window","$timeout","UrlService","FileUploader","NotificationService",function(a,b,c,d,e){return{restrict:"E",templateUrl:"file-upload",scope:!1,priority:10,controller:["$scope","$timeout","RestService",function(a,b,c){a.executeDocumentSave=function(a,b,d){if(a&&b){var f={fileId:b,studentId:a};c.Private.Documents.customPOST(f).then(function(){e.Success("Document "+d+" uploaded!")})}}}],link:function(f){f.uploader=new d({url:c.Files.Upload}),f.uploader.removeAfterUpload=!0,f.deleteItem=function(a){console.log("delete "+a)},f.openDownloadUrl=function(b){a.open(b,"_blank")},f.uploader.onSuccessItem=function(a,b){var c=b.payload.id;f.executeDocumentSave(f.selectedStudent.id,c,a._file.name)},f.uploader.onErrorItem=function(a){e.Error("Failed to upload "+a._file.name)},f.uploader.onCompleteAll=function(){b(function(){f.refreshDocumentsList()},1e3)}}}}]),angular.module("edup.students").directive("studentIdentificationCard",function(){return{restrict:"E",templateUrl:"student-identification-card",link:function(){}}}),angular.module("edup.students").directive("studentsListHeader",function(){return{restrict:"E",templateUrl:"students-list-header",link:function(){}}}),angular.module("edup.students").directive("studentsList",function(){return{restrict:"E",templateUrl:"students-list",link:function(a){a.openStudentDetailModal=function(){$("#student-details-modal-view").modal("show"),$('.nav-tabs a[href="#information"]').tab("show")}}}}),angular.module("edup.students").controller("StudentsController",["$scope","$timeout","$filter","RestService","PaginationService","QueryService",function(a,b,c,d,e,f){a.studentSelected=!1,a.basicSearch={spin:!1},a.studentPaging={enabled:!1,page:1,perPage:10,totalRecords:0},a.loadFullStudent=function(b){b&&(a.basicSearch.spin=!0,d.Private.Students.one(b.toString()).get().then(function(b){a.selectedStudent=b.payload,a.selectedStudent&&(a.studentEdit=_.cloneDeep(a.selectedStudent),a.studentEdit.birthDate&&(a.studentEdit.birthDateString=c("date")(new Date(a.studentEdit.birthDate),"yyyy-MM-dd")),a.selectedStudent.balance=b.payload.balance/100,a.studentSelected=!0,a.basicSearch.spin=!1)}))},a.loadStudents=function(b,c,e,g){a.basicSearch.spin=!0;var h=f.Query(c,e,g,"Created desc");d.Private.Students.get(h).then(function(c){a.students=c.values,a.studentPaging.totalRecords=c.count,a.students.length>0?a.loadFullStudent(b?b:a.students[0].id):a.studentSelected=!1,a.basicSearch.spin=!1})},a.basicSearch.spin||a.loadStudents(null,e.Top(a.studentPaging),e.Skip(a.studentPaging)),a.setSelected=function(b){a.loadFullStudent(b)},a.addToBalance=function(a){console.log("Add new balance "+a)},a.studentsPageChanged=function(b,c){a.basicSearch.spin||(a.studentPaging.page=b,a.loadStudents(null,e.Top(a.studentPaging),e.Skip(a.studentPaging),c))},a.setRecordsPerPage=function(b){a.studentPaging.perPage=b};var g="";a.executeSearch=function(c){c&&c.length>2?b(function(){a.studentPaging.page=1,a.loadStudents(null,e.Top(a.studentPaging),e.Skip(a.studentPaging),c),g=c},300):_.isEmpty(c)&&g!==c&&b(function(){a.studentPaging.page=1,a.loadStudents(null,e.Top(a.studentPaging),e.Skip(a.studentPaging),null),g=c},300)}}]),angular.module("edup.students").directive("students",function(){return{restrict:"E",templateUrl:"students",link:function(a){a.directiveTest="Students tab directive"}}}),angular.module("edup.students").directive("newStudent",function(){return{restrict:"E",templateUrl:"new-student-modal",controller:["$scope","RestService","PaginationService","NotificationService",function(a,b,c,d){var e=function(){var a=$("#addNewStudentModalView");a&&a.modal("hide")};a.resetNewStudent=function(){a.$broadcast("clearFileUploadQueue",{message:"reset"}),a.newStudent&&(a.newStudent.birthDate=null,a.newStudent.photoUrl=null,a.newStudent.photoId=null),a.newStudent=null,a.photoUrl=null,a.photoUploaded=!1},a.executeStudentSave=function(f){f&&f.name&&f.lastName&&(f.birthDate=new Date(f.birthDateString),b.Private.Students.customPOST(f).then(function(b){d.Success("Student "+f.name+" "+f.lastName+" created!"),a.loadStudents(b.payload,c.Top(a.studentPaging),c.Skip(a.studentPaging),null),a.resetNewStudent(),e()}))},a.executeReset=function(){a.resetNewStudent()},a.executeCancel=function(){a.resetNewStudent(),e()}}],link:function(a){a.dismissNewStudentModalDialog=function(){a.dismissModal()}}}}),angular.module("edup.students").directive("photoUpload",["UrlService","FileUploader","$window","$timeout","NotificationService","RestService",function(a,b,c,d,e){return{restrict:"E",templateUrl:"photo-upload",scope:{photoId:"=",photoUrl:"="},priority:10,link:function(f){f.uploader=new b({url:a.Files.Upload}),f.uploader.removeAfterUpload=!0,f.deleteItem=function(a){console.log("delete "+a)},f.openDownloadUrl=function(a){c.open(a,"_blank")},f.$on("clearFileUploadQueue",function(){f.uploader.clearQueue(),f.photoUploaded=!1}),f.uploader.onSuccessItem=function(b,c){f.photoId=c.payload.id,f.photoUrl=a.Files.Download+"/"+f.photoId,e.Success("Student photo uploaded!"),d(function(){f.photoUploaded=!0},500)},f.uploader.onErrorItem=function(){e.Error("Failed to upload student photo!")}}}}]),angular.module("edup.subjects",[]),angular.module("edup.subjects").directive("eventsHeader",function(){return{restrict:"E",templateUrl:"events-header",controller:["$scope","$timeout","moment","QueryService","RestService","TypeAheadService",function(a,b,c,d,e,f){a.subjects=[],a.selectedSubject={},a.subjectSelected=!1;var g=function(b){a.selectedSubject=_.find(f.DataSet(),function(a){return a.subjectName===b}),a.subjectSelected=!!a.selectedSubject},h=f.Build(),i=$("#bloodhound .typeahead");i.typeahead({hint:!0,highlight:!0,minLength:1},{name:"subjectsTypeAhead",source:h}),i.bind("typeahead:selected",function(a,b){g(b)});var j=function(a){return a&&a.amount&&a.eventDate&&a.eventTimeFrom&&a.eventTimeTo?!0:!1},k=function(){i.typeahead("val",""),a.subjectEvent={},a.subjectSelected=null,a.selectedSubject=!1};a.saveNewEvent=function(b){if(j(b)){var c=!1,d={};d.eventDate=new Date(b.eventDate),d.from=new Date(b.eventDate+" "+b.eventTimeFrom),d.to=new Date(b.eventDate+" "+b.eventTimeTo),d.price=100*b.amount,d.subject={},a.subjectSelected?(d.subject.subjectName=a.selectedSubject.subjectName,d.subject.subjectId=a.selectedSubject.subjectId,c=!0):_.isEmpty(b.subjectName)||(d.subject.subjectName=b.subjectName,c=!0),c&&e.Private.Subjects.one("events").customPOST(d).then(function(a){k(),console.log(angular.toJson("Event ID: "+a.payload))})}}}],link:function(){}}}),angular.module("edup.subjects").directive("eventsList",function(){return{restrict:"E",templateUrl:"events-list",controller:["$scope","QueryService","RestService",function(a,b,c){a.events=[],a.setSelected=function(a){console.log("Selected event ID: "+a.eventId)},a.loadMoreEvens=function(){var d=b.Query(10,0,"*","Created desc",null,!0);c.Private.Subjects.one("events").get(d).then(function(b){var c=b.values;_.forEach(c,function(b){a.events.push(b)})})},a.loadMoreEvens()}],link:function(){}}}),angular.module("edup.subjects").controller("SubjectsController",["$scope",function(a){a.subjectsView1="subjectsView1",a.subjectsView2="subjectsView2"}]),angular.module("edup.subjects").directive("subjects",function(){return{restrict:"E",templateUrl:"subjects",link:function(){}}}),angular.module("edup.tabs",["angularFileUpload","fiestah.money","edup.calendar","edup.subjects","edup.students"]),angular.module("edup",["edup.tabs","edup.login","edup.header","edup.footer","edup.common"]),angular.module("edup").config(["$stateProvider",function(a){a.state("students",{templateUrl:"students",url:"/students",controller:"StudentsController"}).state("subjects",{templateUrl:"subjects",url:"/subjects",controller:"SubjectsController"}).state("calendar",{templateUrl:"calendar",url:"/calendar",controller:"CalendarController"})}]),angular.module("edup").run(["$templateCache",function(a){a.put("date-picker",'<div><label for={{datePickerId}} ng-show=label>{{label}}</label><div class="input-group date" id={{datePickerId}} ng-click=openDatePicker()><input placeholder={{pickerPlaceholder}} ng-model=inputField class=form-control name="date"> <span class=input-group-addon><span class="glyphicon glyphicon-calendar"></span></span></div></div>'),a.put("time-picker",'<div><label for={{timePickerId}} ng-show=label>{{label}}</label><div class="input-group date" id={{timePickerId}} ng-click=openDatePicker()><input required placeholder={{pickerPlaceholder}} ng-model=inputField class=form-control name="date"> <span class=input-group-addon><span class="glyphicon glyphicon-time"></span></span></div></div>'),a.put("edup-toggle","<input id={{toggleId}} type=checkbox data-toggle=toggle data-on={{onLabel}} data-off={{offLabel}} data-width=100 data-size=small>"),a.put("edup-footer",'<div ng-controller=FooterController><nav class="navbar navbar-default" style="margin-bottom: 0px !important; margin-top: auto !important"><div class="navbar-text text-center" style="width: 100%">Application version: {{ appVersion }}</div></nav></div>'),a.put("edup-header",'<div><nav class="navbar navbar-default"><div class=container-fluid><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="">Educational planning application</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li ng-class="{ active: isActive(\'/students\')}"><a href=#students>Students<span class=sr-only>(current)</span></a></li><li ng-class="{ active: isActive(\'/subjects\')}"><a href=#subjects>Subjects</a></li><li class=dropdown><a href=#report class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Reports<span class=caret></span></a><ul class=dropdown-menu role=menu><li ng-click=downloadReport()><a href=#>Visiting Journal</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li><a href=#>Separated link</a></li><li class=divider></li><li><a href=#>One more separated link</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# target=_self ng-click=logoutUser()>Log out</a></li></ul></div></div></nav></div>'),a.put("edup-login",'<div class=login-container><div id=output></div><div class=avatar></div><div class=form-box><form name=form method=post><input name=j_username placeholder=username id=text ng-model=username required> <input type=password name=j_password placeholder=password id=password ng-model=password required> <button class="btn btn-info btn-block login" type=submit ng-click="submitLogin(username, password)">Login</button></form></div></div>'),a.put("calendar",'<div class=mainForm ng-controller=CalendarController><div class="col-md-12 column"><div class="col-md-3 form-inline"><div class="btn-group pull-left"><button class="btn btn-primary btn-sm" ng-click=updateTitle() mwl-date-modifier date=calendarDay decrement=calendarView>&lt;&lt; Prev</button> <button class="btn btn-sm" ng-click=updateTitle() mwl-date-modifier date=calendarDay set-to-today>Today</button> <button class="btn btn-primary btn-sm" ng-click=updateTitle() mwl-date-modifier date=calendarDay increment=calendarView>Next &gt;&gt;</button></div></div><div class=col-md-2><div class=btn-group><h4>{{ currentDay }}</h4></div></div><div class="col-md-3 form-inline"><div class="btn-group pull-right"><button class="btn btn-primary btn-sm" ng-click="setCalendarView(\'year\')">Year</button> <button class="btn btn-primary btn-sm" ng-click="setCalendarView(\'month\')">Month</button> <button class="btn btn-primary btn-sm" ng-click="setCalendarView(\'week\')">Week</button> <button class="btn btn-primary btn-sm" ng-click="setCalendarView(\'day\')">Day</button></div></div><div class="col-md-4 form-inline"><h4>Today events:</h4></div></div><div class="col-md-12 column" style="padding-top: 20px"><div class="col-md-8 column"><mwl-calendar events=events view=calendarView view-title=calendarTitle current-day=calendarDay on-event-click=eventClicked(calendarEvent) edit-event-html="\'<i class=\\\'glyphicon glyphicon-pencil\\\'></i>\'" delete-event-html="\'<i class=\\\'glyphicon glyphicon-remove\\\'></i>\'" on-edit-event-click=eventEdited(calendarEvent) on-delete-event-click=eventDeleted(calendarEvent)></mwl-calendar></div><div class="col-md-4 column"><div ng-repeat="event in events"><h4><div class=label ng-class="{ \'label-primary\': event.type === \'info\', \'label-warning\': event.type === \'warning\', \'label-danger\': event.type === \'important\'}" data-toggle=tooltip data-placement=top title="Tooltip on top" tooltip="{{ event.title }}" tooltip-trigger="{{{true: \'mouseenter\', false: \'never\'}[myForm.username.$invalid]}}">({{event.startsAt| date:\'HH:mm\'}} - {{event.endsAt | date:\'HH:mm\'}}) {{event.title | limitTo: 33}} {{event.title.length > 33 ? \'...\' : \'\'}}</div></h4></div></div></div></div>'),a.put("student-accounting",'<div class=mainForm style="margin-left: 30px; margin-right: 30px"><div class="row clearfix"><div class="col-md-12 column"><form role=form name=studentBalanceUpdate><div class=form-group><label for=amount>Enter a monetary amount:</label><div class=input-group><span class=input-group-addon>&euro;</span> <input id=amount class="form-control ng-valid ng-valid-min ng-dirty ng-valid-number" money="" ng-model=balance.amount autofocus precision=2></div></div><div class=form-group><label for=comments>Comments</label><textarea ng-model=balance.comment class="form-control fixedTextArea" id=comments name=comments></textarea></div><div class="form-group col-md-12 column"><div class="col-md-6 column"><label><input type=radio name=operationType value=true ng-model=balance.cash ng-checked=true> Cash</label></div><div class="col-md-6 column"><label><input type=radio name=operationType value=false ng-model=balance.cash> Transfer</label></div></div><div class="form-group text-center"><button ng-click="updateStudentBalance(balance, selectedStudent)" id=addToBalanceButton class="btn btn-success btn-sm">Save</button> <button ng-click=resetValue() id=clearBalanceUpdate type=reset class="btn btn-primary btn-sm">Reset</button></div></form></div></div></div>'),a.put("student-attendance",'<div class=mainForm style="margin-left: 30px; margin-right: 30px"><div class="row clearfix"><div class="col-md-12 column"><table class="table table-hover"><thead><tr><th>Subject name</th><th>Date</th><th>Amount</th></tr></thead><tbody><tr ng-repeat="event in attendanceHistory" ng-class-odd="\'success\'" ng-class-even="\'active\'"><td>{{ event.subject }}</td><td>{{ event.date }}</td><td>{{ event.amount }} EUR</td></tr></tbody></table><div class=text-center><ul class="pagination pagination-sm"><li><a href=#>Prev</a></li><li><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#>4</a></li><li><a href=#>5</a></li><li><a href=#>Next</a></li></ul></div></div><div class="row clearfix"><div class="col-md-12 column"><button type=button class="btn btn-success pull-right">Add new attendance</button></div></div></div></div>'),a.put("balance-modal",'<div app-modal id=addToBalanceModalView class="modal fade bs-example-modal-sm" tabindex=-1 role=dialog aria-labelledby=mySmallModalLabel aria-hidden=true><div class="modal-dialog modal-sm"><div class="modal-content modalViewPadding"><form><fieldset><legend>Add money to account</legend><form class="ng-valid ng-dirty"><div class=form-group><label for=amount>Enter a monetary amount:</label><div class=input-group><span class=input-group-addon>&euro;</span> <input id=amount class="form-control ng-valid ng-valid-min ng-dirty ng-valid-number" money="" ng-model=balance.amount autofocus precision=2></div></div><div class=form-group><label for=comments>Comments</label><textarea ng-model=balance.comment class="form-control fixedTextArea" id=comments name=comments></textarea></div><div class="form-group col-md-12 column"><div class="col-md-6 column"><label><input type=radio name=operationType value=true ng-model=balance.cash ng-checked=true> Cash</label></div><div class="col-md-6 column"><label><input type=radio name=operationType value=false ng-model=balance.cash> Transfer</label></div></div></form><div class="form-group text-center"><button ng-click=saving(balance) id=addToBalanceButton class="btn btn-success btn-sm">Save</button> <button ng-click=resetValue() id=clearBalanceUpdate type=reset class="btn btn-primary btn-sm">Reset</button> <button id=cancelBalanceUpdate class="btn btn-warning btn-sm" data-dismiss=modal ng-click="balance = null">Cancel</button></div></fieldset></form></div></div></div>'),a.put("student-details",'<div app-modal id=student-details-modal-view class="modal fade bs-example-modal-lg" tabindex=-1 role=dialog aria-labelledby=myLargeModalLabel aria-hidden=true><div class="modal-dialog modal-lg"><div class="modal-content modalViewPadding"><div class=modal-header style="padding: 5px !important;border-bottom: none !important"><div class="parent modal-title" id=myModalLabel><div class="child pull=left"><h4>{{selectedStudent.name}} {{selectedStudent.lastName}}</h4></div><div class="child pull-right"><h4 class=pull-right><span class=label style="font-weight: 200 !important" ng-class="{\'label-danger\' :  selectedStudent.balance < 0, \'label-success\' :  selectedStudent.balance > 0, \'label-primary\' :  selectedStudent.balance == 0}">{{ selectedStudent.balance | number : 2}} EUR</span></h4></div></div></div><div role=tabpanel><ul class="nav nav-tabs" role=tablist style="border: none !important"><li role=presentation class=active ng-class="{ active: isActive(\'/information\')}"><a href=#information aria-controls=home role=tab data-toggle=tab>Information</a></li><li role=presentation ng-class="{ active: isActive(\'/accounting\')}"><a href=#accounting aria-controls=profile role=tab data-toggle=tab>Accounting</a></li><li role=presentation ng-class="{ active: isActive(\'/documents\')}" ng-click=refreshDocumentsList()><a href=#documents aria-controls=messages role=tab data-toggle=tab>Documents</a></li><li role=presentation ng-class="{ active: isActive(\'/attendance\')}"><a href=#attendance aria-controls=settings role=tab data-toggle=tab>Attendance</a></li></ul><div class=tab-content style="margin-bottom: 10px"><div role=tabpanel class="tab-pane active first-tab" id=information><edit-student></edit-student></div><div role=tabpanel class="tab-pane next-tab" id=accounting><student-accounting></student-accounting></div><div role=tabpanel class="tab-pane next-tab" id=documents><student-documents></student-documents></div><div role=tabpanel class="tab-pane next-tab" id=attendance><student-attendance></student-attendance></div></div></div></div></div></div>'),a.put("student-documents",'<div class=mainForm style="margin-left: 30px; margin-right: 30px"><div class="row clearfix"><div class="col-md-12 column"><table class="table table-hover"><thead><tr><th>Name</th><th>Size</th><th>Created</th><th></th></tr></thead><tbody><tr dir-paginate="document in documents | itemsPerPage: documentsPaging.perPage" current-page=documentsPaging.page total-items=documentsPaging.totalRecords ng-class-odd="\'success\'" ng-class-even="\'active\'" pagination-id=documentsPaginationId><td>{{ document.fileName }}</td><td>{{ document.size }}</td><td>{{ document.created | date:\'MMM d, y hh:mm\' }}</td><td><a href="{{ document.link }}">Download</a></td></tr></tbody></table><div class=row><div class="col-xs-12 text-center"><dir-pagination-controls on-page-change="documentsPageChanged(newPageNumber, searchValue)" pagination-id=documentsPaginationId></dir-pagination-controls></div></div></div><div style="padding-bottom: 20px"><button type=button class="btn btn-primary btn-sm pull-right" ng-click=toggleDownloadSection()>{{documentsButtonLabel}}</button></div><div ng-show=showDownloadSection><file-upload></file-upload></div></div></div>'),a.put("edit-student",'<div class=mainForm><div class="row clearfix"><form role=form name=studentUpdateForm><div class="col-md-6 column"><div class="col-md-6 column"><div class=form-group><label for=studentName>Name</label><input class=form-control id=studentName ng-model=studentEdit.name required></div><div class=form-group><label for=studentLastName>Last name</label><input type=tel class=form-control id=studentLastName ng-model=studentEdit.lastName required></div></div><div class="col-md-6 column"><div class=form-group><label for=studentMobile>Mobile</label><input class=form-control id=studentMobile ng-model="studentEdit.mobile"></div><div class=form-group><label for=studentPersonalNumber>Personal number</label><input class=form-control id=studentPersonalNumber ng-model="studentEdit.personId"></div></div><div class="col-md-12 column"><div class=form-group><label for=parentInformationInput>Parent information</label><textarea ng-model=studentEdit.parentsInfo class="form-control fixedTextArea" id=parentInformationInput name=parentInformationInput></textarea></div><div class=form-group><label for=characteristicsInput>Characteristics</label><textarea ng-model=studentEdit.characteristics class="form-control fixedTextArea" id=characteristicsInput name=characteristicsInput></textarea></div></div></div><div class="col-md-6 column"><div class="col-md-12 column"><div class=form-group><label for=studentMail>e-mail</label><input class=form-control id=studentMail ng-model="studentEdit.mail"></div><div class=form-group ng-class="{\'has-error\': studentCreatedForm.date.$invalid}"><date-picker date-picker-id=editStudentDatePicker input-field=studentEdit.birthDateString label=Birthday></date-picker></div></div><div class="col-md-12 row"><photo-upload photo-id=studentEdit.photoId photo-url=studentEdit.photoUrl></photo-upload></div></div><div class="col-md-12 column" style="margin-top: 10px; margin-left: 17px"><button type=submit class="btn btn-primary btn-sm" ng-click=executeStudentUpdate(studentEdit)>Update</button></div></form></div></div>'),a.put("file-upload",'<div ng-if=uploader><input type=file nv-file-select uploader=uploader multiple></div><table class=table><thead><tr><th width=50%>Name</th><th ng-show=uploader.isHTML5>Size</th><th ng-show=uploader.isHTML5>Progress</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show=uploader.isHTML5><div class=progress style="margin-bottom: 0"><div class=progress-bar role=progressbar ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-success btn-xs" ng-click=item.upload() ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="glyphicon glyphicon-upload"></span> Upload</button> <button type=button class="btn btn-warning btn-xs" ng-click=item.cancel() ng-disabled=!item.isUploading><span class="glyphicon glyphicon-ban-circle"></span> Cancel</button> <button type=button class="btn btn-danger btn-xs" ng-click=item.remove()><span class="glyphicon glyphicon-trash"></span> Remove</button></td></tr></tbody></table><div><div>Queue progress:<div class=progress><div class=progress-bar role=progressbar ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div></div><button type=button class="btn btn-success btn-sm" ng-click=uploader.uploadAll() ng-disabled=!uploader.getNotUploadedItems().length><span class="glyphicon glyphicon-upload"></span> Upload All</button> <button type=button class="btn btn-warning btn-sm" ng-click=uploader.cancelAll() ng-disabled=!uploader.isUploading><span class="glyphicon glyphicon-ban-circle"></span> Cancel All</button> <button type=button class="btn btn-danger btn-sm" ng-click=uploader.clearQueue() ng-disabled=!uploader.queue.length><span class="glyphicon glyphicon-trash"></span> Remove All</button></div>'),a.put("student-identification-card",'<div><form class=form-horizontal style="border: 1px solid #d3d3d3;background-color: #ededed; border-radius: 5px; padding: 10px"><fieldset><legend>Identification card</legend><div class="col-md-12 column"><table class=identification-card width=100%><tr><td><h4><b>{{ selectedStudent.name }} {{ selectedStudent.lastName}}</b></h4></td><td rowspan=2 width=180px><img alt=140x140 src={{selectedStudent.photoUrl}} class="img-rounded pull-right"></td></tr><tr><td><h4>{{ selectedStudent.personId }}</h4></td></tr></table></div><div class="col-md-12 column" style="padding-top: 20px"><table class=identification-card width=100%><tr><td>Phone number:</td><td>{{ selectedStudent.mobile }}</td></tr><tr><td>Current balance:</td><td>{{ selectedStudent.balance | number : 2}} EUR</td><td><button type=button class="btn btn-primary btn-sm pull-right" data-toggle=modal data-target=#addToBalanceModalView>Add to balance</button></td></tr></table></div><div class="col-md-12 column" style="padding-top: 10px"><button type=button class="btn btn-primary btn-sm" style="width: 100%">Attendance history</button></div></fieldset></form><balance-modal></balance-modal></div>'),a.put("students-list-header",'<div><div class=row><div class=col-xs-8><div class=input-group><span class=input-group-addon id=basic-addon1 ng-class="{\'glyphicon glyphicon-refresh searchTextInput\': basicSearch.spin , \'glyphicon glyphicon-search searchTextInput\': !basicSearch.spin}"></span> <input class=form-control placeholder=search ng-model=searchValue ng-keyup=executeSearch(searchValue)></div></div><div class=col-xs-3><div class=btn-group role=group aria-label=...><button type=button class="btn btn-default" ng-class="{ active: studentPaging.perPage === 10}" ng-click=setRecordsPerPage(10)>10</button> <button type=button class="btn btn-default" ng-class="{ active: studentPaging.perPage === 25}" ng-click=setRecordsPerPage(25)>25</button> <button type=button class="btn btn-default" ng-class="{ active: studentPaging.perPage === 50}" ng-click=setRecordsPerPage(50)>50</button></div></div><div class=col-xs-1><h4><span class="glyphicon glyphicon-plus pull-right" style="cursor: pointer" data-toggle=modal data-target=#addNewStudentModalView ng-click=resetNewStudent()></span></h4></div></div><new-student></new-student></div>'),a.put("students-list",'<div style="padding-top: 20px"><table class="table table-hover"><thead><tr><th>Name</th><th>Last name</th><th>Age</th><th>ID</th><th>Phone</th><th></th></tr></thead><tbody><tr dir-paginate="student in students | itemsPerPage: studentPaging.perPage" current-page=studentPaging.page total-items=studentPaging.totalRecords ng-class-odd="\'success\'" ng-class-even="\'active\'" ng-click=setSelected(student.id) ng-class="{\'missing-data-row\': !student.mobile, \'selected-row\': student.id === selectedStudent.id}" pagination-id=studentsPaginationId><td>{{ student.name }}</td><td>{{ student.lastName }}</td><td>{{ student.age }}</td><td>{{ student.personId }}</td><td>{{ student.mobile }}</td><td><button href=#information type=button class="btn btn-primary btn-xs" ng-click=openStudentDetailModal(student)>Details</button></td></tr></tbody></table><div class=row><div class="col-xs-12 text-center"><dir-pagination-controls on-page-change="studentsPageChanged(newPageNumber, searchValue)" pagination-id=studentsPaginationId></dir-pagination-controls></div></div><student-details></student-details></div>'),a.put("students",'<div class=mainForm ng-controller=StudentsController><div class="row clearfix"><div class="col-md-7 column"><students-list-header></students-list-header><students-list></students-list></div><div class="col-md-5 column" ng-show=studentSelected><student-identification-card></student-identification-card></div></div></div>'),a.put("new-student-modal",'<div app-modal id=addNewStudentModalView class="modal fade bs-example-modal-lg" tabindex=-1 role=dialog aria-labelledby=myLargeModalLabel aria-hidden=true><div class="modal-dialog modal-lg"><div class="modal-content modalViewPadding"><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true><span class="glyphicon glyphicon-remove"></span></button><h4 class=modal-title id=myModalLabel>Add new student</h4></div><div style="padding-top: 20px; padding-bottom: 10px"><div class="row clearfix"><form role=form name=studentCreatedForm><div class="col-md-6 column"><div class="col-md-6 column"><div class=form-group><label for=studentName>Name</label><input class=form-control id=studentName ng-model=newStudent.name required></div><div class=form-group><label for=studentLastName>Last name</label><input type=tel class=form-control id=studentLastName ng-model=newStudent.lastName required></div></div><div class="col-md-6 column"><div class=form-group><label for=studentMobile>Mobile</label><input class=form-control id=studentMobile ng-model="newStudent.mobile"></div><div class=form-group><label for=studentPersonalNumber>Personal number</label><input class=form-control id=studentPersonalNumber ng-model="newStudent.personId"></div></div><div class="col-md-12 column"><div class=form-group><label for=parentInformationInput>Parent information</label><textarea ng-model=newStudent.parentsInfo class="form-control fixedTextArea" id=parentInformationInput name=parentInformationInput></textarea></div><div class=form-group><label for=characteristicsInput>Characteristics</label><textarea ng-model=newStudent.characteristics class="form-control fixedTextArea" id=characteristicsInput name=characteristicsInput></textarea></div></div></div><div class="col-md-6 column"><div class="col-md-12 column"><div class=form-group><label for=studentMail>e-mail</label><input class=form-control id=studentMail ng-model="newStudent.mail"></div><div class=form-group ng-class="{\'has-error\': studentCreatedForm.date.$invalid}"><date-picker date-picker-id=newStudentDatePicker input-field=newStudent.birthDateString label=Birthdate></date-picker></div></div><div class="col-md-12 row"><photo-upload photo-id=newStudent.photoId photo-url=newStudent.photoUrl></photo-upload></div></div><div class="col-md-12 column" style="padding-top: 10px"><button type=submit class="btn btn-success btn-sm" ng-click=executeStudentSave(newStudent)>Save</button> <button type=reset class="btn btn-primary btn-sm" ng-click=executeReset()>Reset</button> <button type=reset class="btn btn-warning btn-sm" ng-click=executeCancel()>Cancel</button></div></form></div></div></div></div></div>'),a.put("photo-upload",'<div style="padding: 10px"><div><div ng-if=uploader><input type=file nv-file-select uploader="uploader"></div><table class=table><thead><tr><th width=50%>Name</th><th ng-show=uploader.isHTML5>Size</th><th ng-show=uploader.isHTML5>Progress</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show=uploader.isHTML5><div class=progress style="margin-bottom: 0"><div class=progress-bar role=progressbar ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-success btn-xs" ng-click=item.upload() ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="glyphicon glyphicon-upload"></span> Upload</button></td></tr></tbody></table></div><div ng-show=photoUrl><img alt=140x140 src={{photoUrl}} class="img-rounded text-center"></div></div>'),a.put("events-header",'<div class=container-fluid><form role=form name=newSubjectEventForm><div class=row><div class=col-md-7><div id=bloodhound><div class=input-group id=subjectTypeAheadInput><span class=input-group-addon id=basic-addon2 ng-class="{\'glyphicon glyphicon-ok searchTextInput\': subjectSelected , \'glyphicon glyphicon-pencil searchTextInput\': !subjectSelected}"></span><div id=scrollable-dropdown-menu><input class="form-control typeahead tt-query" placeholder=Subject ng-model=subjectEvent.subjectName ng-keyup=updateSelectedSubject()></div></div></div></div><div class=col-md-4><div class=form-group ng-class="{\'has-error\': newSubjectEventForm.number.$invalid}"><div class=input-group><span class=input-group-addon>&euro;</span> <input required id=amount class="form-control ng-valid ng-valid-min ng-dirty ng-valid-number" money="" ng-model=subjectEvent.amount autofocus placeholder=Amount precision=2></div></div></div><div class=col-md-1><div class=form-group><button type=submit class="btn btn-primary btn-sm" ng-click=saveNewEvent(subjectEvent)>Save</button></div></div></div><div class=row style="padding-top: 10px"><div class="col-md-5 column"><div class=form-group><date-picker required date-picker-id=subjectEventDateId input-field=subjectEvent.eventDate picker-placeholder=Date></date-picker></div></div><div class="col-md-3 column"><div class=form-group><time-picker required time-picker-id=subjectEventTimeFromId input-field=subjectEvent.eventTimeFrom picker-placeholder=From></time-picker></div></div><div class="col-md-3 column"><div class=form-group><time-picker required time-picker-id=subjectEventTimeToId input-field=subjectEvent.eventTimeTo picker-placeholder=To></time-picker></div></div></div></form></div>'),a.put("events-list",'<div class=container-fluid><div infinite-scroll=loadMoreEvens() infinite-scroll-distance=3><div ng-repeat="event in events" ng-class-odd="\'success\'" ng-class-even="\'active\'" ng-click=setSelected(event)>{{event.eventId}}</div></div></div>'),a.put("subjects",'<div class=mainForm ng-controller=SubjectsController><div class="row clearfix"><div class="col-md-7 column"><div><events-header ng-form=""></div><div><events-list></events-list></div></div><div class="col-md-5 column">{{subjectsView2}}</div></div></div>')
}]);